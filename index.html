<!doctype html>
<html class="no-js" lang="en">

<head>
	<!-- meta data -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i"
		rel="stylesheet">


	<title>Laptop Mkt</title>

	<!-- social link share preview -->
	<meta property="og:title" content="Laptop Mkt" />
	<meta property="og:description" content="Laptop Mkt" />
	<meta property="og:image" content="assets/images/Screenshot.png" />
	<meta property="og:url" content="https://laptopmkt.onrender.com/" />
	<meta property="og:site_name" content="Laptop Mkt" />
	<meta property="og:type" content="website" />
	<meta property="og:locale" content="en_US" />
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@LaptopMkt" />
	<meta name="twitter:creator" content="@LaptopMkt" />
	<meta name="twitter:title" content="Laptop Mkt" />
	<meta name="twitter:description" content="Laptop Mkt" />
	<meta name="twitter:image" content="assets/images/Screenshot.png" />
	<meta name="twitter:url" content="https://laptopmkt.onrender.com/" />
	<meta name="twitter:domain" content="https://laptopmkt.onrender.com/" />
	<meta itemprop="name" content="Laptop Mkt" />
	<meta itemprop="description" content="Laptop Mkt" />
	<meta itemprop="image" content="assets/images/Screenshot.png" />
	<meta itemprop="url" content="https://laptopmkt.onrender.com/" />
	<meta itemprop="sameAs" content="https://laptopmkt.onrender.com/" />
	<meta name="description" content="Laptop Mkt" />
	<meta name="keywords" content="Laptop Mkt" />
	<meta name="author" content="" />


	<link rel="shortcut icon" type="image/icon" href="assets/logo/favicon.png" />
	<link rel="stylesheet" href="assets/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/css/linearicons.css">
	<link rel="stylesheet" href="assets/css/animate.css">
	<link rel="stylesheet" href="assets/css/owl.carousel.min.css">
	<link rel="stylesheet" href="assets/css/owl.theme.default.min.css">
	<link rel="stylesheet" href="assets/css/bootstrap.min-.css">
	<link rel="stylesheet" href="assets/css/bootsnav.css">
	<link rel="stylesheet" href="assets/css/style.css">
	<link rel="stylesheet" href="assets/css/responsive.css">

</head>

<body>
	<!--welcome-hero start -->
	<header id="home" class="welcome-hero">

		<div id="header-carousel" class="carousel slide carousel-fade" data-ride="carousel">
			<ol class="carousel-indicators" id="carouselIndicators"></ol>
			<div class="carousel-inner" role="listbox" id="carouselItems"></div>
		</div>

		<!-- top-area Start -->
		<div class="top-area">
			<div class="header-area">
				<!-- Start Navigation -->
				<nav class="navbar navbar-default bootsnav  navbar-sticky navbar-scrollspy"
					data-minus-value-desktop="70" data-minus-value-mobile="55" data-speed="1000">

					<!-- Start Top Search -->
					<div class="top-search">
						<div class="container">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-search"></i></span>
								<input type="text" class="form-control" placeholder="Search">
								<span class="input-group-addon close-search"><i class="fa fa-times"></i></span>
							</div>
						</div>
					</div>
					<!-- End Top Search -->

					<div class="container">
						<!-- Start Atribute Navigation -->
						<div class="attr-nav">
							<ul>
								<li class="search">
									<a href="#"><span class="lnr lnr-magnifier"></span></a>
								</li>
								<li class="nav-setting">
									<a href="settings.html"><span class="lnr lnr-cog"></span></a>
								</li>
								<li class="nav-setting">
									<a href="add_product.html"><span class="lnr lnr-plus-circle"></span></a>
								</li>
							</ul>
						</div><!--/.attr-nav-->
						<!-- End Atribute Navigation -->

						<!-- Start Header Navigation -->
						<div class="navbar-header">
							<button type="button" class="navbar-toggle" data-toggle="collapse"
								data-target="#navbar-menu">
								<i class="fa fa-bars"></i>
							</button>
							<a class="navbar-brand" href="index.html">Laptop<span>mkt</span>.</a>
						</div>
						<!-- End Header Navigation -->

						<!-- Collect the nav links, forms, and other content for toggling -->
						<div class="collapse navbar-collapse menu-ui-design" id="navbar-menu">
							<ul class="nav navbar-nav navbar-center" data-in="fadeInDown" data-out="fadeOutUp">
								<li class=" scroll active"><a href="#home">home</a></li>
								<li class="scroll"><a href="#new-arrivals">All Products</a></li>
								<li class="scroll"><a href="#newsletter">contact</a></li>
							</ul>
						</div>
					</div>
				</nav>
				<!-- End Navigation -->
			</div>
			<div class="clearfix"></div>

		</div>
		<!-- top-area End -->

	</header>
	<!--welcome-hero end -->

	<!--popular-products start -->
	<section id="populer-products" class="populer-products">
		<div class="container">
			<div class="section-header p-2">
				<h2>Popular Products</h2>
			</div>
			<div class="populer-products-content">
				<div class="row" id="popular-container">
					<!-- fa spinner loader -->
					<div class="loader text-center" style="margin-top:35px;">
						<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>
						<span class="sr-only">Loading...</span>
					</div>
					<!-- fa spinner loader -->
				</div>
			</div>
		</div><!--/.container-->

	</section>
	<!--Trending-products end-->

	<!--all-arrivals start -->
	<section id="new-arrivals" class="new-arrivals">
		<div class="container">
			<div class="section-header p-2">
				<h2>All Products</h2>
			</div>
			<div class="new-arrivals-content">
				<div class="row" id="all-container">
					<!-- fa spinner loader -->
					<div class="loader text-center">
						<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>
						<span class="sr-only">Loading...</span>
					</div>
					<!-- fa spinner loader -->
				</div>
			</div>
		</div><!--/.container-->

	</section>
	<!--new-arrivals end -->


	<!--newsletter strat -->
	<section id="newsletter" class="newsletter">
		<div class="container">
			<div class="hm-footer-details">
				<div class="row">
					<div class=" col-md-3 col-sm-6 col-xs-12">
						<div class="hm-footer-widget">
							<div class="hm-foot-title">
								<h4>information</h4>
							</div><!--/.hm-foot-title-->
							<div class="hm-foot-menu">
								<ul>
									<li><a href="#">about us</a></li><!--/li-->
									<li><a href="#">contact us</a></li><!--/li-->
									<li><a href="#">news</a></li><!--/li-->
									<li><a href="#">store</a></li><!--/li-->
								</ul><!--/ul-->
							</div><!--/.hm-foot-menu-->
						</div><!--/.hm-footer-widget-->
					</div><!--/.col-->
					<div class=" col-md-3 col-sm-6 col-xs-12">
						<div class="hm-footer-widget">
							<div class="hm-foot-title">
								<h4>collections</h4>
							</div><!--/.hm-foot-title-->
							<div class="hm-foot-menu">
								<ul>
									<li><a href="#">wooden chair</a></li><!--/li-->
									<li><a href="#">royal cloth sofa</a></li><!--/li-->
									<li><a href="#">accent chair</a></li><!--/li-->
									<li><a href="#">bed</a></li><!--/li-->
									<li><a href="#">hanging lamp</a></li><!--/li-->
								</ul><!--/ul-->
							</div><!--/.hm-foot-menu-->
						</div><!--/.hm-footer-widget-->
					</div><!--/.col-->
					<div class=" col-md-3 col-sm-6 col-xs-12">
						<div class="hm-footer-widget">
							<div class="hm-foot-title">
								<h4>my accounts</h4>
							</div><!--/.hm-foot-title-->
							<div class="hm-foot-menu">
								<ul>
									<li><a href="#">my account</a></li><!--/li-->
									<li><a href="#">wishlist</a></li><!--/li-->
									<li><a href="#">Community</a></li><!--/li-->
									<li><a href="#">order history</a></li><!--/li-->
									<li><a href="#">my cart</a></li><!--/li-->
								</ul><!--/ul-->
							</div><!--/.hm-foot-menu-->
						</div><!--/.hm-footer-widget-->
					</div><!--/.col-->
					<div class=" col-md-3 col-sm-6  col-xs-12">
						<div class="hm-footer-widget">
							<div class="hm-foot-title">
								<h4>newsletter</h4>
							</div><!--/.hm-foot-title-->
							<div class="hm-foot-para">
								<p>
									Subscribe to get latest news,update and information.
								</p>
							</div><!--/.hm-foot-para-->
							<div class="hm-foot-email">
								<div class="foot-email-box">
									<input type="text" class="form-control" placeholder="Enter Email Here....">
								</div><!--/.foot-email-box-->
								<div class="foot-email-subscribe">
									<span><i class="fa fa-location-arrow"></i></span>
								</div><!--/.foot-email-icon-->
							</div><!--/.hm-foot-email-->
						</div><!--/.hm-footer-widget-->
					</div><!--/.col-->
				</div><!--/.row-->
			</div><!--/.hm-footer-details-->

		</div><!--/.container-->

	</section><!--/newsletter-->
	<!--newsletter end -->

	<!--footer start-->
	<footer id="footer" class="footer">
		<div class="container">
			<div class="hm-footer-copyright text-center">
				<div class="footer-social">
					<a href="#"><i class="fa fa-facebook"></i></a>
					<a href="#"><i class="fa fa-instagram"></i></a>
				</div>
				<p>
					&copy;copyright. designed and developed by <a href="https://www.themesine.com/">themesine</a>
				</p>
			</div>
		</div>

		<div id="scroll-Top">
			<div class="return-to-top">
				<i class="fa fa-angle-up " id="scroll-top" data-toggle="tooltip" data-placement="top" title=""
					data-original-title="Back to Top" aria-hidden="true"></i>
			</div>

		</div><!--/.scroll-Top-->

	</footer><!--/.footer-->
	<!--footer end-->

	<!-- Include all js compiled plugins (below), or include individual files as needed -->
	<script src="assets/js/jquery.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/bootsnav.js"></script>
	<script src="assets/js/owl.carousel.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
	<script src="assets/js/custom.js"></script>

	<!-- Firebase -->
	<script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-database.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-analytics.js"></script>
	<script src="firebase.js"></script>


	<script>
		/****************************************************************/
		// Reference to the "banners" node in the Firebase Realtime Database
		const bannersRef = database.ref("banners");

		// Function to fetch and populate the carousel with banners
		function populateCarousel() {
			bannersRef.on("value", function (snapshot) {
				const carouselIndicators = document.getElementById("carouselIndicators");
				const carouselItems = document.getElementById("carouselItems");
				let isFirst = true;

				snapshot.forEach(function (childSnapshot, index) {
					const banner = childSnapshot.val();

					// Create carousel indicator
					const indicator = document.createElement("li");
					indicator.setAttribute("data-target", "#header-carousel");
					indicator.setAttribute("data-slide-to", index);
					if (isFirst) {
						indicator.classList.add("active");
						isFirst = false;
					}
					carouselIndicators.appendChild(indicator);

					// Create carousel item
					const item = document.createElement("div");
					item.classList.add("carousel-item");
					if (isFirst) {
						item.classList.add("active");
					}
					item.innerHTML = `
						<div class="single-slide-item slide${index + 1}">
							<div class="container">
								<div class="welcome-hero-content">
									<div class="row">
										<div class="col-sm-7">
											<div class="single-welcome-hero">
												<div class="welcome-hero-txt">
													<h4 class="banner-tag-line">${banner.bannerTagLine}</h4>
													<h2 class="banner-title">${banner.title}</h2>
													<p>${banner.description}</p>
													<button class="btn-cart welcome-add-cart welcome-more-info" onclick="window.location.href='#'">More Info</button>
												</div>
											</div>
										</div>
										<div class="col-sm-5">
											<div class="single-welcome-hero">
												<div class="welcome-hero-img">
													<img src="${banner.bImage}" alt="slider image">
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					`;
					carouselItems.appendChild(item);
				});

				// Initialize the Bootstrap carousel
				$("#header-carousel").carousel();
			});
		}

		// Call the populateCarousel function to load and populate the carousel
		$(document).ready(populateCarousel);
	</script>


	<script>
		// Reference to the "products" node in the Firebase Realtime Database
		const productsRef = database.ref("products");
		// Function to fetch and update products in real-time
		function fetchProductsRealTime(callback) {
			productsRef.on("value", function (snapshot) {
				const products = [];
				snapshot.forEach(function (childSnapshot) {
					var productKey = childSnapshot.key;
					var product = childSnapshot.val();
					product.key = productKey;
					products.push(product);
				});

				// Call the provided callback function with the updated products
				callback(products);
			});
		}

		// Callback function to display and update products in the specified location
		function displayAndUpdateProducts(products) {
			// Reference to the target HTML element where products should be displayed
			const productsContainer = document.getElementById("popular-container");

			// Clear any existing content in the container
			productsContainer.innerHTML = "";

			// Loop through the products and create HTML elements for each product
			products.forEach(function (product) {
				if (product.popular) {
					const productDiv = document.createElement("div");
					productDiv.className = "col-sm-12 col-md-4 my-1";

					productDiv.innerHTML = `
						<div class="single-populer-products my-1">
							<div class="single-populer-product-img mt40">
								<img src="${product.image}" alt="Product Image">
							</div>
							<h2><a href="update.html?key=${product.key}">${product.name}</a></h2>
							<div class="single-populer-products-para">
								<p>${product.description}</p>
							</div>
						</div>
					`;

					productsContainer.appendChild(productDiv);
				}
			});
		}


		// Callback function to display and update products in the specified location
		function displayAndUpdateAllProducts(products) {
			// Reference to the target HTML element where products should be displayed
			const productsContainer = document.getElementById("all-container");

			// Clear any existing content in the container
			productsContainer.innerHTML = "";

			// Loop through the products and create HTML elements for each product
			products.forEach(function (product) {
				const productDiv = document.createElement("div");
				productDiv.className = "col-md-3 col-sm-4 my-1";

				var stockStatus = product.stockAmount;
				var actionText = "Buy Now";
				if (product.stockAmount < 1){
					stockStatus = "Out of Stock";
					actionText = "Out of Stock";
				}

				productDiv.innerHTML = `
					<div class="single-new-arrival">
						<div class="single-new-arrival-bg">
							<img src="${product.image}" alt="Product Image">
							<div class="single-new-arrival-bg-overlay"></div>
							<div class="sale bg-1">
								<p>${stockStatus}</p>
							</div>
							<div class="new-arrival-cart">
								<p>
									<span class="lnr lnr-cart"></span>
									<span class="" onclick="updateStockAmount('${product.key}', ${product.stockAmount -1})" style="cursor:pointer;">${actionText}</span>
								</p>
								<p class="arrival-review pull-right">
									<span class="lnr lnr-heart"></span>
									<span class="lnr lnr-frame-expand"></span>
								</p>
							</div>
						</div>
						<h4><a href="#">${product.name}</a></h4>
						<p class="arrival-product-price">TZs. ${product.price} /-</p>
					</div>
				`;

				productsContainer.appendChild(productDiv);
			});
		}

		// Call fetchProductsRealTime with the displayAndUpdateProducts callback
		fetchProductsRealTime(displayAndUpdateProducts);
		fetchProductsRealTime(displayAndUpdateAllProducts);


		// Function to update the stock amount of a specific product
		function updateStockAmount(productKey, newStockAmount) {
			if (newStockAmount < 0) {
				alert("This Product is out of stock.");
				return;
			}

			const productRef = productsRef.child(productKey);

			// Create an object with the new stock amount
			const updatedData = {
				stockAmount: newStockAmount
			};

			// Use the update method to change the stock amount
			productRef.update(updatedData, function (error) {
				if (error) {
				console.error("Stock amount could not be updated: " + error);
				alert("Stock amount could not be updated: ");
				} else {
				console.log("Item Bought.");
				alert("Stock amount updated successfully.")
				}
			});
		}

	</script>


</body>

</html>